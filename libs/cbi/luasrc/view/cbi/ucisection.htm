<%#
LuCI - Lua Configuration Interface
Copyright 2008 Steven Barth <steven@midlink.org>
Copyright 2008 Jo-Philipp Wich <xm@leipzig.freifunk.net>

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

	http://www.apache.org/licenses/LICENSE-2.0

$Id$

-%>

<% self:render_children(section, scope or {}) %>

<% if #self.optionals[section] > 0 or self.dynamic then %>
	<div class="cbi-optionals">
		<% if self.dynamic then %>
			<input type="text" name="cbi.opt.<%=self.config%>.<%=section%>" />
		<% else %>
		<select name="cbi.opt.<%=self.config%>.<%=section%>">
			<option><%:cbi_addopt%></option>
			<% for key, val in pairs(self.optionals[section]) do %>
				<option id="cbi-<%=self.config.."-"..section.."-"..val.option%>" value="<%=val.option%>"><%=val.title%></option>
			<% end %>
		</select>
		<script type="text/javascript"><% for key, val in pairs(self.optionals[section]) do %>
			<% if #val.deps > 0 then %><% for j, d in ipairs(val.deps) do %>cbi_d_add("cbi-<%=self.config.."-"..section.."-"..val.option%>", "cbid.<%=self.config.."."..section.."."..d.field%>", "<%=d.value%>");
		<% end %><% end %>
		<% end %></script>
	<% end %>
		<input type="submit" value="<%:add%>" />
	</div>
<% end %>
