<%#
LuCI - Lua Configuration Interface
Copyright 2008 Steven Barth <steven@midlink.org>
Copyright 2008 Jo-Philipp Wich <xm@leipzig.freifunk.net>

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

	http://www.apache.org/licenses/LICENSE-2.0

$Id$

-%>
				<div class="cbi-section" id="cbi-<%=self.config%>-<%=self.sectiontype%>">
					<h2><%=self.title%></h2>
					<div class="cbi-section-descr"><%=self.description%></div>
					<div class="cbi-section-node">
						<div class="cbi-section-row">
<% for i, k in pairs(self.children) do %>
						<div class="cbi-section-row-head"><%=k.title%></div>			
<% end %>
						</div>
						<div class="cbi-section-row">
<% for i, k in pairs(self.children) do %>
						<div class="cbi-section-row-descr"><%=k.description%></div>			
<% end %>
						</div>
<% for i, k in ipairs(self:cfgsections()) do%>
						<% if not self.anonymous then %><h3 class="table-cell"><%=k%></h3><% end %>
<%
section = k 
scope = {valueheader = "cbi/tiny_valueheader", valuefooter = "cbi/tiny_valuefooter"}
%>
<div class="cbi-section-row" id="cbi-<%=self.config%>-<%=section%>">
<%+cbi/ucisection%>
						<% if self.addremove then %><div class="cbi-section-remove table-cell">
							<input type="submit" name="cbi.rts.<%=self.config%>.<%=k%>" value="X" />
						</div><% end %>
</div>
<% end %>
<% if self.addremove then %>
					<div class="cbi-section-create">
						<% if self.anonymous then %>
							<input type="submit" name="cbi.cts.<%=self.config%>.<%=self.sectiontype%>" value="<%:cbi_add%>" />
						<% else %>
							<input type="text" class="cbi-section-create-name" name="cbi.cts.<%=self.config%>.<%=self.sectiontype%>" />
							<input type="submit" value="<%:cbi_add%>" />
						<% end %><% if self.err_invalid then %><div class="cbi-error"><%:cbi_invalid%></div><% end %>
					</div>
					</div>
<% end %>
				</div>
